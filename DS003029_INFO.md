# DS003029 Dataset Information

## Dataset Details

**Name**: Neural Fragility as an EEG Marker for the Seizure Onset Zone  
**Format**: BIDS (Brain Imaging Data Structure)  
**Data Type**: iEEG/ECoG (intracranial EEG)  
**File Format**: BrainVision (.eeg, .vhdr, .vmrk)

## Current Status

⚠️ **Dataset Not Fully Downloaded**

The files in `T:\suezier_p\dataset\ds003029-master` are **Git LFS pointers**, not actual data files.

Evidence:
- `.eeg` files are only 141 bytes (should be MB/GB for EEG data)
- Files contain Git LFS metadata instead of actual EEG data
- Dataset requires Git LFS (Large File Storage) to download

## Dataset Structure

```
ds003029-master/
├── sub-pt01/
│   └── ses-presurgery/
│       └── ieeg/
│           ├── *_ieeg.eeg      # BrainVision data file (141 bytes - LFS pointer)
│           ├── *_ieeg.vhdr     # BrainVision header
│           ├── *_ieeg.vmrk     # BrainVision markers
│           ├── *_events.tsv    # Seizure annotations ✓
│           └── *_channels.tsv  # Channel information ✓
├── sub-pt02/...
├── sub-pt03/...
└── [30+ subjects]
```

## Seizure Annotations (Example from sub-pt01)

From `sub-pt01_ses-presurgery_task-ictal_acq-ecog_run-01_events.tsv`:
- **Seizure Onset**: 75.95 seconds (sample 75950)
- **Seizure Offset**: 161.82 seconds (sample 161820)
- **Duration**: ~86 seconds
- **Event markers**: "onset" (value 28), "offset" (value 27)

## How to Download Full Dataset

### Option 1: Git LFS (Recommended)

```bash
# Install Git LFS
# Windows: Download from https://git-lfs.github.com/

# Clone with LFS
cd T:\suezier_p\dataset
git lfs install
git clone https://github.com/[repository-url] ds003029-full
cd ds003029-full
git lfs pull  # Download actual data files
```

### Option 2: OpenNeuro

Visit: https://openneuro.org/datasets/ds003029

Download complete dataset (~100GB+)

## Converting BrainVision to EDF

Once downloaded, convert to EDF format:

```python
import mne

# Read BrainVision format
raw = mne.io.read_raw_brainvision('path/to/file.vhdr', preload=True)

# Export to EDF
raw.export('path/to/output.edf', fmt='edf', overwrite=True)
```

## Why This Dataset is Valuable

1. **High-quality iEEG data**: Intracranial recordings (better SNR than scalp EEG)
2. **100 subjects**: Large sample size from 5 medical centers
3. **Detailed annotations**: Seizure onset/offset, clinical notes, channel info
4. **Seizure onset zone labels**: Ground truth for epilepsy focus
5. **Multiple seizures**: ~3-4 seizures per subject

## Current Training Status

Your model is currently trained on:
- ✅ **CHB-MIT Dataset**: T:\suezier_p\dataset\training + validation
  - 27 training EDF files (scalp EEG)
  - 8 validation EDF files
  - Known seizure timings for chb01 patient
  - Format: Standard EDF (directly readable)

## Recommendation

### Short-term: Continue with CHB-MIT
The CHB-MIT dataset is:
- ✅ Already downloaded (full EDF files)
- ✅ Compatible with your EDF reader
- ✅ Large dataset (multiple subjects, hours of recordings)
- ✅ Well-documented seizure timings

### Long-term: Add DS003029
If you download DS003029 with Git LFS:
1. Convert BrainVision files to EDF
2. Parse events.tsv files for seizure timings
3. Combine with CHB-MIT for larger training set
4. Train on both scalp EEG (CHB-MIT) and iEEG (DS003029)

## Training Script Modification Needed

To train on DS003029 after downloading:

```python
# 1. Install mne-python for BrainVision support
pip install mne

# 2. Convert BrainVision to EDF
import mne
from pathlib import Path

bv_dir = Path('T:/suezier_p/dataset/ds003029-master')
edf_dir = Path('T:/suezier_p/dataset/ds003029-edf')
edf_dir.mkdir(exist_ok=True)

for vhdr_file in bv_dir.rglob('*.vhdr'):
    try:
        raw = mne.io.read_raw_brainvision(vhdr_file, preload=True)
        output_name = vhdr_file.stem.replace('_ieeg', '') + '.edf'
        output_path = edf_dir / output_name
        raw.export(str(output_path), fmt='edf')
        print(f"Converted: {vhdr_file.name}")
    except Exception as e:
        print(f"Error: {vhdr_file.name} - {e}")

# 3. Parse events files for seizure annotations
import pandas as pd

for events_file in bv_dir.rglob('*_events.tsv'):
    df = pd.read_csv(events_file, sep='\t')
    
    # Extract seizure timings
    onset_rows = df[df['trial_type'] == 'onset']
    offset_rows = df[df['trial_type'] == 'offset']
    
    if not onset_rows.empty and not offset_rows.empty:
        onset_time = onset_rows['onset'].values[0]
        offset_time = offset_rows['onset'].values[0]
        print(f"{events_file.name}: Seizure {onset_time}s - {offset_time}s")
```

## File Size Estimates

- CHB-MIT (current): ~10-15 GB
- DS003029 (if fully downloaded): ~100-150 GB
- Combined: ~115-165 GB

## Summary

**Current Status**: ⚠️ DS003029 not usable yet (Git LFS pointers only)

**Action Required**:
1. Download full dataset with Git LFS or from OpenNeuro
2. Convert BrainVision to EDF format
3. Update training script to use combined datasets

**Alternative**: Continue training on CHB-MIT dataset (already working)

---

**Created**: November 11, 2025  
**Dataset**: ds003029 (Neural Fragility EEG Study)  
**Status**: Metadata only - Full download required
